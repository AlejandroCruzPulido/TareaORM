{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/perfil.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@ionic/angular\";\nfunction PerfilListPage_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"h1\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Usuario: \");\n    i0.ɵɵelement(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelement(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function PerfilListPage_ion_item_6_Template_ion_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const p_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editPerfil(p_r1.id));\n    });\n    i0.ɵɵtext(10, \"Modificar perfil\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function PerfilListPage_ion_item_6_Template_ion_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const p_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.deletePerfil(p_r1.id));\n    });\n    i0.ɵɵtext(12, \"Eliminar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Tipo: \", p_r1.tipo, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Nombre: \", p_r1.usuario.nombre, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Email: \", p_r1.usuario.email, \" \");\n  }\n}\nclass PerfilListPage {\n  constructor(perfilService, router) {\n    this.perfilService = perfilService;\n    this.router = router;\n    this.perfiles = [];\n  }\n  ngOnInit() {\n    this.loadPerfiles();\n    this.perfilService.perfilUpdated$.subscribe(() => {\n      this.loadPerfiles();\n    });\n  }\n  ngOnDestroy() {\n    if (this.refreshSubscription) {\n      this.refreshSubscription.unsubscribe();\n    }\n  }\n  loadPerfiles() {\n    this.perfilService.getPerfiles().subscribe(data => {\n      console.log(data);\n      this.perfiles = data;\n    });\n  }\n  gotoPerfilAdd() {\n    this.router.navigateByUrl('/perfil-add');\n  }\n  gotoHome() {\n    this.router.navigateByUrl('/home');\n  }\n  editPerfil(perfilId) {\n    this.router.navigate(['/perfil-update', perfilId]);\n  }\n  deletePerfil(perfilId) {\n    this.perfilService.deletePerfil(perfilId).subscribe(() => {\n      console.log('Perfil eliminado');\n      this.loadPerfiles();\n    });\n  }\n}\n_class = PerfilListPage;\n_class.ɵfac = function PerfilListPage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.PerfilService), i0.ɵɵdirectiveInject(i2.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-perfil-list\"]],\n  decls: 12,\n  vars: 3,\n  consts: [[3, \"translucent\"], [3, \"fullscreen\"], [4, \"ngFor\", \"ngForOf\"], [\"expand\", \"full\", 3, \"click\"], [3, \"click\"]],\n  template: function PerfilListPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n      i0.ɵɵtext(3, \"perfil-list\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"ion-list\");\n      i0.ɵɵtemplate(6, PerfilListPage_ion_item_6_Template, 13, 3, \"ion-item\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"ion-footer\")(8, \"ion-button\", 3);\n      i0.ɵɵlistener(\"click\", function PerfilListPage_Template_ion_button_click_8_listener() {\n        return ctx.gotoPerfilAdd();\n      });\n      i0.ɵɵtext(9, \"A\\u00F1adir nuevo perfil\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"ion-button\", 3);\n      i0.ɵɵlistener(\"click\", function PerfilListPage_Template_ion_button_click_10_listener() {\n        return ctx.gotoHome();\n      });\n      i0.ɵɵtext(11, \"Volver al inicio\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"translucent\", true);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"fullscreen\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.perfiles);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.IonButton, i4.IonContent, i4.IonFooter, i4.IonHeader, i4.IonItem, i4.IonLabel, i4.IonList, i4.IonTitle, i4.IonToolbar],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { PerfilListPage };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","PerfilListPage_ion_item_6_Template_ion_button_click_9_listener","restoredCtx","ɵɵrestoreView","_r3","p_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","editPerfil","id","PerfilListPage_ion_item_6_Template_ion_button_click_11_listener","ctx_r4","deletePerfil","ɵɵadvance","ɵɵtextInterpolate1","tipo","usuario","nombre","email","PerfilListPage","constructor","perfilService","router","perfiles","ngOnInit","loadPerfiles","perfilUpdated$","subscribe","ngOnDestroy","refreshSubscription","unsubscribe","getPerfiles","data","console","log","gotoPerfilAdd","navigateByUrl","gotoHome","perfilId","navigate","ɵɵdirectiveInject","i1","PerfilService","i2","Router","selectors","decls","vars","consts","template","PerfilListPage_Template","rf","ctx","ɵɵtemplate","PerfilListPage_ion_item_6_Template","PerfilListPage_Template_ion_button_click_8_listener","PerfilListPage_Template_ion_button_click_10_listener","ɵɵproperty"],"sources":["C:\\Users\\sombr\\Documents\\AED\\Proyecto\\frontend\\src\\app\\perfil-list\\perfil-list.page.ts","C:\\Users\\sombr\\Documents\\AED\\Proyecto\\frontend\\src\\app\\perfil-list\\perfil-list.page.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { PerfilService } from '../services/perfil.service';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-perfil-list',\n  templateUrl: './perfil-list.page.html',\n  styleUrls: ['./perfil-list.page.scss'],\n})\nexport class PerfilListPage implements OnInit, OnDestroy {\n  perfiles: any = [];\n  private refreshSubscription!: Subscription;\n\n  constructor(private perfilService: PerfilService, private router: Router) {}\n\n  ngOnInit() {\n    this.loadPerfiles();\n    this.perfilService.perfilUpdated$.subscribe(() => {\n      this.loadPerfiles();\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.refreshSubscription) {\n      this.refreshSubscription.unsubscribe();\n    }\n  }\n\n  loadPerfiles() {\n    this.perfilService.getPerfiles().subscribe((data) => {\n      console.log(data);\n      this.perfiles = data;\n    });\n  }\n\n  gotoPerfilAdd() {\n    this.router.navigateByUrl('/perfil-add');\n  }\n\n  gotoHome() {\n    this.router.navigateByUrl('/home');\n  }\n\n  editPerfil(perfilId: number) {\n    this.router.navigate(['/perfil-update', perfilId]);\n  }\n\n  deletePerfil(perfilId: number) {\n    this.perfilService.deletePerfil(perfilId).subscribe(() => {\n      console.log('Perfil eliminado');\n      this.loadPerfiles();\n    });\n  }\n}\n","<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-title>perfil-list</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <ion-list>\n    <ion-item *ngFor=\"let p of perfiles\">\n      <ion-label>\n        <h1>Tipo: {{p.tipo}}</h1>\n        Usuario:\n        <p></p> \n        Nombre: {{p.usuario.nombre}} \n        <p></p>\n        Email:  {{p.usuario.email}}\n      </ion-label>\n      <ion-button (click)=\"editPerfil(p.id)\">Modificar perfil</ion-button>\n      <ion-button (click)=\"deletePerfil(p.id)\">Eliminar</ion-button>\n    </ion-item>\n  </ion-list>\n</ion-content> \n\n<ion-footer>\n  <ion-button (click)=\"gotoPerfilAdd()\" expand=\"full\">Añadir nuevo perfil</ion-button>\n  <ion-button (click)=\"gotoHome()\" expand=\"full\">Volver al inicio</ion-button>    \n</ion-footer>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}